{{ define "main" }}
  <div class="container">
    <div class="content">
      <h1>{{ .Site.Title }}</h1>
      <p>{{ .Site.Params.description }}</p>

      {{/* Find the showcase project */}}
      {{ $showcaseProject := "" }}
      {{ range where .Site.RegularPages "Params.showcase" true }}
        {{ $showcaseProject = . }}
      {{ end }}

      {{/* Display Showcase Project */}}
      {{ if $showcaseProject }}
        <div class="showcase-project">
          <h2>Currently Working On:</h2>
          <div class="post-item">
            <div class="post-item-inner">
              <a href="{{ $showcaseProject.Permalink }}">
                <h1>{{ $showcaseProject.Title }}</h1>
                {{ with $showcaseProject.Params.thumbnail }}
                  {{ $image := $showcaseProject.Resources.GetMatch . }}
                  {{ if $image }}
                    <img src="{{ $image.Permalink }}" alt="{{ $showcaseProject.Title }}" style="width: auto; height: auto;"/>
                  {{ end }}
                {{ end }}
                <p class="post-summary">{{ $showcaseProject.Params.summary }}</p>
              </a>
            </div>
          </div>
        </div>
      {{ end }}

      <hr/>

      <h2>All Projects</h2>
      <div class="posts">
        {{/* Find all non-archived, non-showcase projects */}}
        {{ $projects := where .Site.Pages "Section" "projects" }}
        {{ $regularProjects := where $projects "Params.archived" "ne" true }}
        {{ $regularProjects := where $projects "Params.hidden" "ne" true }}
        {{ $nonShowcaseProjects := where $regularProjects "Params.showcase" "ne" true }}

        {{ range $nonShowcaseProjects }}
          <div class="post-item">
            <div class="post-item-inner">
              <a href="{{ .Permalink }}">
                <h3 class="post-title">{{ .Title }}</h3>
                <p class="post-summary">{{ .Params.summary }}</p>
              </a>
            </div>
          </div>
        {{ end }}
      </div>
    </div>
  </div>
{{ end }}
